<van-notify id="custom-notify" />
<van-dialog id="van-dialog" />
<van-toast id="van-toast" />
<van-nav-bar fixed border="{{ false }}" z-index="3" bg="#18BC9C" bind:click-right="delCart">
  <view slot="title" class='text-default text-small ell-super' bind:tap="openLocation">
    <van-icon name="location" /> <text> {{ selected_location ? selected_location.title : location.title ? location.title : location.formatted_addresses.recommend }} </text> <van-icon name="arrow-down"/>
  </view>
    <view slot="right"><text class='text-default text-small'>删除</text></view>
</van-nav-bar>

<view class='icon-center text-muted-a' style='display: {{ carts.length <= 0 ? "flex" : "none" }}'>
  <van-icon name="shopping-cart-o"/>
  <text class='icon-text-center text-muted'>购物车居然是空的</text>
</view>

<view class="body" style='margin-top:90rpx;margin-bottom:350rpx;'>
  <view class='card-fluid gs-card' wx:for="{{ carts }}" wx:key="{{ item.cart_code }}">
      <van-row>
        <van-col span="2"><view class="gs-checkbox"><van-checkbox data-idx="{{ index }}" data-id="{{ item.cart_code }}" bind:change="checkedChange" value='{{ item.cart_state == "1" }}' checked-color="{{ item.inventory > 0 ? color.success : color.successdisable }}"></van-checkbox></view></van-col>
        <van-col span="7" data-id="{{ item.goods_code }}" bindtap="showInfo"><image src='{{ fs + item.goods_img }}'/></van-col>
        <van-col span="15">
          <view style='margin-top: 30rpx'>
            <van-row data-id="{{ item.goods_code }}" bindtap="showInfo">
              <van-col span="24">
                <text class='text-primary text-small ell-super'>{{ item.goods_name }}</text>
              </van-col>
            </van-row>
            <van-row>
              <van-col span="24">
                <van-tag plain style='padding-right: 10rpx;'>爆款直降</van-tag>
                <van-tag plain style='padding-right: 10rpx;'>会员优选</van-tag>
                <view style='float:right; margin-right: 20rpx'>
                  <van-stepper style="display: {{ item.inventory > 0 ? 'block' : 'none' }}" data-idx="{{ index }}" data-code="{{ item.cart_code }}" min="1" max="{{ item.inventory }}" value="{{ item.amount }}" bind:change="onChangeNum" bind:overlimit="onReduce" />
                  <text style="display: {{ item.inventory > 0 ? 'none' : 'block' }}" class="text-danger text-mini">库存不足</text>
                </view>
              </van-col>
            </van-row>
            <van-row data-id="{{ item.goods_code }}" bindtap="showInfo">
              <van-col span="24">
                <text class='text-small text-success' style='float: left;font-weight:700;'>¥ {{ item.price }}</text>
                <text class='text-mini text-muted text-del' style='float: left;padding-left: 10rpx'>¥ {{ item.original }}</text>
              </van-col>
            </van-row>
          </view>
        </van-col>
      </van-row>
    </view>
<!-- 
     <view class='card-fluid' style='border-bottom: 0rpx; border-left: 0; border-right: 0;'>
      <van-row>
        <van-col span="2">
          <view class='text-center' style='padding-top: 100%'><van-radio checked-color="{{ color.success }}"></van-radio></view>
        </van-col>
        <van-col span="22">
          <van-card tag="" centered price="10.00" origin-price="20.00" desc="低温纯净海域生长、食用简单、口感鲜嫩、营养丰富" title="加拿大冻北极甜虾1kg" thumb='https://img14.yiguoimg.com/d/items/2018/181026/9288733106578778_500.jpg'>
              <view slot="footer">
                <van-stepper min="0" value="{{ 1 }}" bind:change="onChange" />
              </view>
              <view slot="tags">
                <van-tag plain  style='padding-right: 10rpx;'>爆款直降</van-tag>
                <van-tag plain  style='padding-right: 10rpx;'>会员优选</van-tag>
              </view>
            </van-card>
        </van-col>
      </van-row>
    </view> -->
   <van-submit-bar style='display: {{ carts.length > 0 ? "block" : "none" }}' price="{{ total }}" button-text="去结算   ▸" button-type="success"  bind:submit="toCheck" tip="{{ carts.length > 0 }}" mb="110rpx">
      <van-checkbox style='padding-left: 20rpx;' checked-color="{{ color.success }}" value="{{ all_pick }}" bind:change="allPickChange">全选</van-checkbox>
        <view slot="tip">
          实付满¥49包邮，还差¥32.2元，配送费¥9 <text bindtap="openLocation" class='text-success' style='float: right'>去凑单</text>
        </view>
    </van-submit-bar>
</view>